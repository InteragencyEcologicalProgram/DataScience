<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="James White, PhD   CDFW Stockton   james.white@wildlife.ca.gov">
<meta name="dcterms.date" content="2023-02-14">

<title>3 ways to create maps in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="R maps_files/libs/clipboard/clipboard.min.js"></script>
<script src="R maps_files/libs/quarto-html/quarto.js"></script>
<script src="R maps_files/libs/quarto-html/popper.min.js"></script>
<script src="R maps_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R maps_files/libs/quarto-html/anchor.min.js"></script>
<link href="R maps_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R maps_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R maps_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R maps_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R maps_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="R maps_files/libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="R maps_files/libs/jquery-1.12.4/jquery.min.js"></script>
<link href="R maps_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="R maps_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="R maps_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="R maps_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="R maps_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="R maps_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="R maps_files/libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="R maps_files/libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="R maps_files/libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">3 ways to create maps in R</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>James White, PhD <br> CDFW Stockton <br> james.white@wildlife.ca.gov </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 14, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Here I’m going to show you how to produce high quality maps ready for publishing in journals, reports, memos, or html pages. They get <em>slightly</em> more difficult as we progress, and I will demonstrate creating the same basic map using all three approaches.</p>
<p>Install the necessary libraries before we get started. Then load them using these commands.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(deltamapr) <span class="co">#install first using the command:  devtools::install_github("InteragencyEcologicalProgram/deltamapr")</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#if you have issues installing this your department's firewall settings can be blocking downloads from github, CDFW has such a policy. Don't worry we'll manually download the same shapefile as well.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I used to run the Fall Midwater Trawl survey so today we’ll be creating maps just plotting the historical site locations sampled in this survey, using their GPS coordinates. Let’s import that data first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>fmwt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"https://filelib.wildlife.ca.gov/Public/TownetFallMidwaterTrawl/FMWT%20Data/FMWT_Station_Locations.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(., <span class="sc">!</span><span class="fu">is.na</span>(Latitude)) <span class="co">#remove one station with missing values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ggmap-with-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="ggmap-with-ggplot">GGMap with GGPlot</h2>
<p>The package ggmap dowloads a map from the Google Maps server and then you can overlay points, bubbles, etc. using ggplot. Google Maps are nice, but to use those you need to create a Google Cloud Platform account, and setup an API with a private key to download. See a tutorial here (<a href="https://appsilon.com/r-ggmap/" class="uri">https://appsilon.com/r-ggmap/</a>) if you want to explore that route. I don’t want to share my private API key and I don’t recommend you do either, so for any circumstances where you’d want to share your R code, I recommend the same package but use another mapping source. I really like stamen maps, you can explore the different types here (<a href="http://maps.stamen.com/" class="uri">http://maps.stamen.com/</a>).</p>
<p>Let’s set a bounding box based on the Latitude &amp; Longitude coordinates from the data we imported earlier and then download a stamen map within these bounds.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create bounding box for map</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>deltabox <span class="ot">&lt;-</span> <span class="fu">make_bbox</span>(<span class="at">lat =</span> Latitude, <span class="at">lon =</span> Longitude, <span class="at">data =</span> fmwt, <span class="at">f =</span> <span class="fu">c</span>(.<span class="dv">10</span>, .<span class="dv">03</span>)) <span class="co">#sets bounding box based on station coordinates, f value adds a buffer around the perimeter</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#download background map</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>stamenmap <span class="ot">&lt;-</span> <span class="fu">get_stamenmap</span>(deltabox, <span class="at">zoom =</span> <span class="dv">10</span>, <span class="at">maptype =</span> <span class="st">"toner-lite"</span>, <span class="at">force =</span> <span class="cn">TRUE</span>, <span class="at">crop =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL.</code></pre>
</div>
</div>
<p>Now let’s plot the site coordinates over the map with ggplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create scatter plot (using ggplot functions) on top of our map</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggmap</span>(stamenmap) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> fmwt, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size=</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FMWT Station Locations"</span>, <span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#plot map we just created</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-maps_files/figure-html/ggplot-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>You can do many types of ggplot functions on top of your ggmap. For instance you could create bubble plots of CPUE. Here’s a tutorial for bubble plots: <a href="https://www.data-to-viz.com/graph/bubble.html" class="uri">https://www.data-to-viz.com/graph/bubble.html</a></p>
</section>
<section id="sf-with-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="sf-with-ggplot">SF with GGPlot</h2>
<p>The simple features (sf) package works well for handling shapefiles which are basically geographic polygons typically used in Geographic Information System (GIS) applications such as ArcMap or QGIS. The sf package is very robust and can do a lot of GIS tasks within the R environment. So I encourage you to explore it further, it can do a lot more than the simple map we’re making here.</p>
<p>We’re going to do a similar approach to ggmap, load a background map then use ggplot to put points on top of it. Let’s start by loading a background map. First we’ll grab a shapefile from the “Deltamapr” package created by Sam Bashevkin. This is simply a collection of shapefiles conveniently put into an R package. Read more about this package and included shapefiles here (<a href="https://github.com/InteragencyEcologicalProgram/deltamapr/" class="uri">https://github.com/InteragencyEcologicalProgram/deltamapr/</a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create background map</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>sfmap <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(WW_Delta) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#add station locations</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> fmwt, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size=</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FMWT Station Locations"</span>, <span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#plot map</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>sfmap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-maps_files/figure-html/sf%20map-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>You could also manually load a shapefile if that makes more sense for your use case. First, we’ll download and extract a zip file containing the shapefiles. Then use those shapefiles directly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"http://www.jamesryanwhite.com/hydro_delta_marsh.zip"</span>, <span class="at">destfile =</span> <span class="st">"./hydro_delta_marsh.zip"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="at">zipfile =</span> <span class="st">"hydro_delta_marsh.zip"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sfmap <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"hydro_delta_marsh.shp"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">data =</span> .) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#add station locations</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> fmwt, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Longitude, <span class="at">y =</span> Latitude), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size=</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FMWT Station Locations"</span>, <span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#plot map</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>sfmap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-maps_files/figure-html/shapefile-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Sometimes it’s easier to first convert your data into an sf object then plot. Notice the “crs” argument addresses the issue with coordinate reference system which is why the previous plot looks stretched out.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>fmwt_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(fmwt, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"Longitude"</span>, <span class="st">"Latitude"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> WW_Delta) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> fmwt_sf, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size=</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"FMWT Station Locations"</span>, <span class="at">x =</span> <span class="st">"Longitude"</span>, <span class="at">y =</span> <span class="st">"Latitude"</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R-maps_files/figure-html/alt%20sf-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="interactive-map-with-leaflet" class="level2">
<h2 class="anchored" data-anchor-id="interactive-map-with-leaflet">Interactive map with leaflet</h2>
<p>The leaflet package is basically a javascript library that integrates well with R. You can use this to create interactive maps where you can scroll, pan, and zoom just like if you were exploring Google maps or Apple maps online. Because of the interactive functionality, this is not useful for static reports or documents, but more for webpages, R Markdown, or R Shiny apps. You can create maps using maptiles (like we did with ggmaps) polygons/shapefiles/sf spatial objects (like we did with sf), or simply lat/long data (like the fmwt data we’re using).</p>
<p>You can also make your map reactive, meaning you can have the map dynamically change based on some sort of filtering (e.g.&nbsp;selections in drop down boxes, etc.). We will not explore that here, but know that this is a powerful package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Prepare the text for the tooltip:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  mytext <span class="ot">&lt;-</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Station: "</span>, fmwt<span class="sc">$</span>Station, <span class="st">"&lt;br/&gt;"</span>, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Station Latitude: "</span>, fmwt<span class="sc">$</span>Latitude, <span class="st">"&lt;br/&gt;"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Station Longitude: "</span>, fmwt<span class="sc">$</span>Longitude, <span class="st">"&lt;br/&gt;"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>     <span class="fu">lapply</span>(htmltools<span class="sc">::</span>HTML)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">#create map</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>leafmap <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(fmwt) <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setView</span>(<span class="at">lat =</span><span class="fl">38.12</span>, <span class="at">lng=</span> <span class="sc">-</span><span class="dv">122</span>, <span class="at">zoom=</span><span class="dv">9</span>) <span class="sc">%&gt;%</span> <span class="co">#set center point and zoom level</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(<span class="st">"CartoDB.PositronNoLabels"</span>) <span class="sc">%&gt;%</span> <span class="co">#grab openstreetmap tiles</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="sc">~</span>Longitude, <span class="sc">~</span>Latitude, <span class="co">#add station points</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">fillColor =</span> <span class="st">"blue"</span>, </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">fillOpacity =</span> <span class="fl">0.5</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">radius =</span> <span class="dv">5</span>, <span class="at">stroke =</span> <span class="cn">FALSE</span>, <span class="at">weight =</span> <span class="dv">1</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> mytext,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">labelOptions =</span> <span class="fu">labelOptions</span>( <span class="at">style =</span> <span class="fu">list</span>(<span class="st">"font-weight"</span> <span class="ot">=</span> <span class="st">"normal"</span>, <span class="at">padding =</span> <span class="st">"3px 8px"</span>), <span class="at">textsize =</span> <span class="st">"13px"</span>, <span class="at">direction =</span> <span class="st">"auto"</span>))</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#plot map</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>leafmap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-698f84ccfdff3d25b379" style="width:100%;height:325px;"></div>
<script type="application/json" data-for="htmlwidget-698f84ccfdff3d25b379">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.PositronNoLabels",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[38.18775,38.27433,37.9987,38.00042,38.00472,38.01745,38.01442,38.0297,38.02087,38.02812,38.03815,38.03612,38.02363,38.02853,38.05605,38.04038,38.04772,38.06005,38.06312,38.07553,38.0705,38.06275,38.0595,38.06003,38.0667,38.10508,38.12828,38.05758,38.04883,38.04645,38.03353,38.028,38.03298,38.03513,38.04455,38.04883,38.06117,38.06462,38.06595,38.05213,38.05678,38.0702,38.08075,38.09383,38.06167,38.05997,38.06022,38.05945,38.05713,38.05228,38.04813,38.04547,38.04888,38.0513,38.05638,38.0592,38.092,38.07867,38.07022,38.06875,38.07378,38.1031,38.11783,38.11552,38.12163,38.14853,38.1698,38.0887,38.06505,38.06087,38.07087,38.07925,38.0903,38.11397,38.12608,38.14787,38.162,38.17595,38.19042,38.20712,38.22295,38.23787,38.17017,38.33428,38.23615,38.23578,38.33343,38.36737,38.5377,38.47387,38.40462,38.26815,38.25502778,38.03528,38.02308,38.02872,38.02995,38.03337,38.0512,38.07083,38.09742,38.08792,38.09978,38.10128,38.0913,38.0205,38.10628,38.07828,38.05953,38.05412,38.04308,38.02442,38.00228,37.99247,37.96883,37.97012,37.94662,37.949,38.10572,38.14138,38.16513,38.20438,38.13445,38.23331,38.24714,37.67917,37.69361,37.59028,37.60556,37.62444,37.64583,37.66806,37.69167,37.71167,37.73333,37.75417,37.78583,37.67917,37.81861,37.84722,37.85778,37.83417,37.82778,37.84389,37.87,37.86528,37.88972,37.92139,37.94028,37.98031,38.01389,37.97219,37.99581,38.01189,38.02219,38.06669,37.99831,38.05,38.0775,38.02361,38.05281,38.05189,38.06531,38.07331,38.07311,38.05561,38.10419,38.05281,38.06389,38.18381,38.16771,38.06111,38.56118333,38.370767,38.05561,38.02219,38.02683,38.05669,38.0625,37.87919,37.87419,37.86111,38.08914,38.14039],[-121.58057,-121.53937,-122.4086,-122.41488,-122.4192,-122.40438,-122.39387,-122.37355,-122.37743,-122.41167,-122.3936,-122.36103,-122.35078,-122.32817,-122.2955,-122.29592,-122.36672,-122.34842,-122.30588,-122.33933,-122.3243,-122.27875,-122.27232,-122.24892,-122.2568,-122.26988,-122.2802,-122.21245,-122.17192,-122.17887,-122.15815,-122.15057,-122.14515,-122.12897,-122.10637,-122.09647,-122.06828,-122.06007,-122.0473,-122.11128,-122.10772,-122.09415,-122.083,-122.06973,-122.01955,-122.00397,-121.9832,-121.9767,-121.95597,-121.939,-121.91492,-121.90412,-121.88783,-121.88,-121.87722,-121.86842,-122.01472,-121.99408,-121.97938,-121.96802,-121.94725,-122.0356,-122.04183,-122.04805,-122.05717,-122.05738,-122.02177,-121.88332,-121.83475,-121.79692,-121.77892,-121.7618,-121.74,-121.70797,-121.6967,-121.69048,-121.68228,-121.67028,-121.64095,-121.66008,-121.67362,-121.68438,-121.63138,-121.64733,-121.67348,-121.55878,-121.56968,-121.5214,-121.58468,-121.5844,-121.6156,-121.70277,-121.6885833,-121.83875,-121.79868,-121.7617,-121.73203,-121.71942,-121.69305,-121.67622,-121.66487,-121.64883,-121.62767,-121.6022,-121.57587,-121.58255,-121.56747,-121.56847,-121.55573,-121.51653,-121.5298,-121.46705,-121.45037,-121.40875,-121.37172,-121.53705,-121.53475,-121.55908,-121.49525,-121.50475,-121.49303,-121.4789,-121.56625,-121.51994,-121.51056,-122.3125,-122.31306,-122.25972,-122.28472,-122.30111,-122.31389,-122.32611,-122.33889,-122.33944,-122.34528,-122.35083,-122.36111,-122.35833,-122.42139,-122.44722,-122.46972,-122.39639,-122.35833,-122.34111,-122.345,-122.39861,-122.42222,-122.44,-122.44583,-122.41197,-122.375,-122.425,-122.436,-122.432,-122.449,-122.427,-122.449,-122.431,-122.432,-122.305,-122.319,-122.414,-122.394,-122.392,-122.357,-122.183,-122.058,-121.944,-121.844,-121.967,-121.9347,-121.814,-121.55618,-121.63075,-121.847,-121.819,-121.772,-121.667,-121.50056,-121.5762637,-121.52331,-121.56931,-121.53575,-121.47947],5,null,null,{"interactive":true,"className":"","stroke":false,"color":"white","weight":1,"opacity":0.5,"fill":true,"fillColor":"blue","fillOpacity":0.5},null,null,null,null,["Station:  72 <br/> Station Latitude:  38.18775 <br/> Station Longitude:  -121.58057 <br/>","Station:  73 <br/> Station Latitude:  38.27433 <br/> Station Longitude:  -121.53937 <br/>","Station:  305 <br/> Station Latitude:  37.9987 <br/> Station Longitude:  -122.4086 <br/>","Station:  306 <br/> Station Latitude:  38.00042 <br/> Station Longitude:  -122.41488 <br/>","Station:  307 <br/> Station Latitude:  38.00472 <br/> Station Longitude:  -122.4192 <br/>","Station:  308 <br/> Station Latitude:  38.01745 <br/> Station Longitude:  -122.40438 <br/>","Station:  309 <br/> Station Latitude:  38.01442 <br/> Station Longitude:  -122.39387 <br/>","Station:  310 <br/> Station Latitude:  38.0297 <br/> Station Longitude:  -122.37355 <br/>","Station:  311 <br/> Station Latitude:  38.02087 <br/> Station Longitude:  -122.37743 <br/>","Station:  314 <br/> Station Latitude:  38.02812 <br/> Station Longitude:  -122.41167 <br/>","Station:  315 <br/> Station Latitude:  38.03815 <br/> Station Longitude:  -122.3936 <br/>","Station:  321 <br/> Station Latitude:  38.03612 <br/> Station Longitude:  -122.36103 <br/>","Station:  322 <br/> Station Latitude:  38.02363 <br/> Station Longitude:  -122.35078 <br/>","Station:  323 <br/> Station Latitude:  38.02853 <br/> Station Longitude:  -122.32817 <br/>","Station:  325 <br/> Station Latitude:  38.05605 <br/> Station Longitude:  -122.2955 <br/>","Station:  326 <br/> Station Latitude:  38.04038 <br/> Station Longitude:  -122.29592 <br/>","Station:  327 <br/> Station Latitude:  38.04772 <br/> Station Longitude:  -122.36672 <br/>","Station:  328 <br/> Station Latitude:  38.06005 <br/> Station Longitude:  -122.34842 <br/>","Station:  329 <br/> Station Latitude:  38.06312 <br/> Station Longitude:  -122.30588 <br/>","Station:  334 <br/> Station Latitude:  38.07553 <br/> Station Longitude:  -122.33933 <br/>","Station:  335 <br/> Station Latitude:  38.0705 <br/> Station Longitude:  -122.3243 <br/>","Station:  336 <br/> Station Latitude:  38.06275 <br/> Station Longitude:  -122.27875 <br/>","Station:  337 <br/> Station Latitude:  38.0595 <br/> Station Longitude:  -122.27232 <br/>","Station:  338 <br/> Station Latitude:  38.06003 <br/> Station Longitude:  -122.24892 <br/>","Station:  339 <br/> Station Latitude:  38.0667 <br/> Station Longitude:  -122.2568 <br/>","Station:  340 <br/> Station Latitude:  38.10508 <br/> Station Longitude:  -122.26988 <br/>","Station:  341 <br/> Station Latitude:  38.12828 <br/> Station Longitude:  -122.2802 <br/>","Station:  401 <br/> Station Latitude:  38.05758 <br/> Station Longitude:  -122.21245 <br/>","Station:  403 <br/> Station Latitude:  38.04883 <br/> Station Longitude:  -122.17192 <br/>","Station:  404 <br/> Station Latitude:  38.04645 <br/> Station Longitude:  -122.17887 <br/>","Station:  405 <br/> Station Latitude:  38.03353 <br/> Station Longitude:  -122.15815 <br/>","Station:  406 <br/> Station Latitude:  38.028 <br/> Station Longitude:  -122.15057 <br/>","Station:  407 <br/> Station Latitude:  38.03298 <br/> Station Longitude:  -122.14515 <br/>","Station:  408 <br/> Station Latitude:  38.03513 <br/> Station Longitude:  -122.12897 <br/>","Station:  409 <br/> Station Latitude:  38.04455 <br/> Station Longitude:  -122.10637 <br/>","Station:  410 <br/> Station Latitude:  38.04883 <br/> Station Longitude:  -122.09647 <br/>","Station:  411 <br/> Station Latitude:  38.06117 <br/> Station Longitude:  -122.06828 <br/>","Station:  412 <br/> Station Latitude:  38.06462 <br/> Station Longitude:  -122.06007 <br/>","Station:  413 <br/> Station Latitude:  38.06595 <br/> Station Longitude:  -122.0473 <br/>","Station:  414 <br/> Station Latitude:  38.05213 <br/> Station Longitude:  -122.11128 <br/>","Station:  415 <br/> Station Latitude:  38.05678 <br/> Station Longitude:  -122.10772 <br/>","Station:  416 <br/> Station Latitude:  38.0702 <br/> Station Longitude:  -122.09415 <br/>","Station:  417 <br/> Station Latitude:  38.08075 <br/> Station Longitude:  -122.083 <br/>","Station:  418 <br/> Station Latitude:  38.09383 <br/> Station Longitude:  -122.06973 <br/>","Station:  501 <br/> Station Latitude:  38.06167 <br/> Station Longitude:  -122.01955 <br/>","Station:  502 <br/> Station Latitude:  38.05997 <br/> Station Longitude:  -122.00397 <br/>","Station:  503 <br/> Station Latitude:  38.06022 <br/> Station Longitude:  -121.9832 <br/>","Station:  504 <br/> Station Latitude:  38.05945 <br/> Station Longitude:  -121.9767 <br/>","Station:  505 <br/> Station Latitude:  38.05713 <br/> Station Longitude:  -121.95597 <br/>","Station:  507 <br/> Station Latitude:  38.05228 <br/> Station Longitude:  -121.939 <br/>","Station:  508 <br/> Station Latitude:  38.04813 <br/> Station Longitude:  -121.91492 <br/>","Station:  509 <br/> Station Latitude:  38.04547 <br/> Station Longitude:  -121.90412 <br/>","Station:  510 <br/> Station Latitude:  38.04888 <br/> Station Longitude:  -121.88783 <br/>","Station:  511 <br/> Station Latitude:  38.0513 <br/> Station Longitude:  -121.88 <br/>","Station:  512 <br/> Station Latitude:  38.05638 <br/> Station Longitude:  -121.87722 <br/>","Station:  513 <br/> Station Latitude:  38.0592 <br/> Station Longitude:  -121.86842 <br/>","Station:  515 <br/> Station Latitude:  38.092 <br/> Station Longitude:  -122.01472 <br/>","Station:  516 <br/> Station Latitude:  38.07867 <br/> Station Longitude:  -121.99408 <br/>","Station:  517 <br/> Station Latitude:  38.07022 <br/> Station Longitude:  -121.97938 <br/>","Station:  518 <br/> Station Latitude:  38.06875 <br/> Station Longitude:  -121.96802 <br/>","Station:  519 <br/> Station Latitude:  38.07378 <br/> Station Longitude:  -121.94725 <br/>","Station:  601 <br/> Station Latitude:  38.1031 <br/> Station Longitude:  -122.0356 <br/>","Station:  602 <br/> Station Latitude:  38.11783 <br/> Station Longitude:  -122.04183 <br/>","Station:  603 <br/> Station Latitude:  38.11552 <br/> Station Longitude:  -122.04805 <br/>","Station:  604 <br/> Station Latitude:  38.12163 <br/> Station Longitude:  -122.05717 <br/>","Station:  605 <br/> Station Latitude:  38.14853 <br/> Station Longitude:  -122.05738 <br/>","Station:  606 <br/> Station Latitude:  38.1698 <br/> Station Longitude:  -122.02177 <br/>","Station:  608 <br/> Station Latitude:  38.0887 <br/> Station Longitude:  -121.88332 <br/>","Station:  701 <br/> Station Latitude:  38.06505 <br/> Station Longitude:  -121.83475 <br/>","Station:  703 <br/> Station Latitude:  38.06087 <br/> Station Longitude:  -121.79692 <br/>","Station:  704 <br/> Station Latitude:  38.07087 <br/> Station Longitude:  -121.77892 <br/>","Station:  705 <br/> Station Latitude:  38.07925 <br/> Station Longitude:  -121.7618 <br/>","Station:  706 <br/> Station Latitude:  38.0903 <br/> Station Longitude:  -121.74 <br/>","Station:  707 <br/> Station Latitude:  38.11397 <br/> Station Longitude:  -121.70797 <br/>","Station:  708 <br/> Station Latitude:  38.12608 <br/> Station Longitude:  -121.6967 <br/>","Station:  709 <br/> Station Latitude:  38.14787 <br/> Station Longitude:  -121.69048 <br/>","Station:  710 <br/> Station Latitude:  38.162 <br/> Station Longitude:  -121.68228 <br/>","Station:  711 <br/> Station Latitude:  38.17595 <br/> Station Longitude:  -121.67028 <br/>","Station:  712 <br/> Station Latitude:  38.19042 <br/> Station Longitude:  -121.64095 <br/>","Station:  713 <br/> Station Latitude:  38.20712 <br/> Station Longitude:  -121.66008 <br/>","Station:  715 <br/> Station Latitude:  38.22295 <br/> Station Longitude:  -121.67362 <br/>","Station:  716 <br/> Station Latitude:  38.23787 <br/> Station Longitude:  -121.68438 <br/>","Station:  717 <br/> Station Latitude:  38.17017 <br/> Station Longitude:  -121.63138 <br/>","Station:  719 <br/> Station Latitude:  38.33428 <br/> Station Longitude:  -121.64733 <br/>","Station:  723 <br/> Station Latitude:  38.23615 <br/> Station Longitude:  -121.67348 <br/>","Station:  724 <br/> Station Latitude:  38.23578 <br/> Station Longitude:  -121.55878 <br/>","Station:  735 <br/> Station Latitude:  38.33343 <br/> Station Longitude:  -121.56968 <br/>","Station:  736 <br/> Station Latitude:  38.36737 <br/> Station Longitude:  -121.5214 <br/>","Station:  795 <br/> Station Latitude:  38.5377 <br/> Station Longitude:  -121.58468 <br/>","Station:  796 <br/> Station Latitude:  38.47387 <br/> Station Longitude:  -121.5844 <br/>","Station:  797 <br/> Station Latitude:  38.40462 <br/> Station Longitude:  -121.6156 <br/>","Station:  721 <br/> Station Latitude:  38.26815 <br/> Station Longitude:  -121.70277 <br/>","Station:  722 <br/> Station Latitude:  38.25502778 <br/> Station Longitude:  -121.6885833 <br/>","Station:  802 <br/> Station Latitude:  38.03528 <br/> Station Longitude:  -121.83875 <br/>","Station:  804 <br/> Station Latitude:  38.02308 <br/> Station Longitude:  -121.79868 <br/>","Station:  806 <br/> Station Latitude:  38.02872 <br/> Station Longitude:  -121.7617 <br/>","Station:  807 <br/> Station Latitude:  38.02995 <br/> Station Longitude:  -121.73203 <br/>","Station:  808 <br/> Station Latitude:  38.03337 <br/> Station Longitude:  -121.71942 <br/>","Station:  809 <br/> Station Latitude:  38.0512 <br/> Station Longitude:  -121.69305 <br/>","Station:  810 <br/> Station Latitude:  38.07083 <br/> Station Longitude:  -121.67622 <br/>","Station:  811 <br/> Station Latitude:  38.09742 <br/> Station Longitude:  -121.66487 <br/>","Station:  812 <br/> Station Latitude:  38.08792 <br/> Station Longitude:  -121.64883 <br/>","Station:  813 <br/> Station Latitude:  38.09978 <br/> Station Longitude:  -121.62767 <br/>","Station:  814 <br/> Station Latitude:  38.10128 <br/> Station Longitude:  -121.6022 <br/>","Station:  815 <br/> Station Latitude:  38.0913 <br/> Station Longitude:  -121.57587 <br/>","Station:  902 <br/> Station Latitude:  38.0205 <br/> Station Longitude:  -121.58255 <br/>","Station:  903 <br/> Station Latitude:  38.10628 <br/> Station Longitude:  -121.56747 <br/>","Station:  904 <br/> Station Latitude:  38.07828 <br/> Station Longitude:  -121.56847 <br/>","Station:  905 <br/> Station Latitude:  38.05953 <br/> Station Longitude:  -121.55573 <br/>","Station:  906 <br/> Station Latitude:  38.05412 <br/> Station Longitude:  -121.51653 <br/>","Station:  908 <br/> Station Latitude:  38.04308 <br/> Station Longitude:  -121.5298 <br/>","Station:  909 <br/> Station Latitude:  38.02442 <br/> Station Longitude:  -121.46705 <br/>","Station:  910 <br/> Station Latitude:  38.00228 <br/> Station Longitude:  -121.45037 <br/>","Station:  911 <br/> Station Latitude:  37.99247 <br/> Station Longitude:  -121.40875 <br/>","Station:  912 <br/> Station Latitude:  37.96883 <br/> Station Longitude:  -121.37172 <br/>","Station:  913 <br/> Station Latitude:  37.97012 <br/> Station Longitude:  -121.53705 <br/>","Station:  914 <br/> Station Latitude:  37.94662 <br/> Station Longitude:  -121.53475 <br/>","Station:  915 <br/> Station Latitude:  37.949 <br/> Station Longitude:  -121.55908 <br/>","Station:  919 <br/> Station Latitude:  38.10572 <br/> Station Longitude:  -121.49525 <br/>","Station:  920 <br/> Station Latitude:  38.14138 <br/> Station Longitude:  -121.50475 <br/>","Station:  921 <br/> Station Latitude:  38.16513 <br/> Station Longitude:  -121.49303 <br/>","Station:  922 <br/> Station Latitude:  38.20438 <br/> Station Longitude:  -121.4789 <br/>","Station:  923 <br/> Station Latitude:  38.13445 <br/> Station Longitude:  -121.56625 <br/>","Station:  70 <br/> Station Latitude:  38.23331 <br/> Station Longitude:  -121.51994 <br/>","Station:  71 <br/> Station Latitude:  38.24714 <br/> Station Longitude:  -121.51056 <br/>","Station:  101 <br/> Station Latitude:  37.67917 <br/> Station Longitude:  -122.3125 <br/>","Station:  102 <br/> Station Latitude:  37.69361 <br/> Station Longitude:  -122.31306 <br/>","Station:  103 <br/> Station Latitude:  37.59028 <br/> Station Longitude:  -122.25972 <br/>","Station:  104 <br/> Station Latitude:  37.60556 <br/> Station Longitude:  -122.28472 <br/>","Station:  105 <br/> Station Latitude:  37.62444 <br/> Station Longitude:  -122.30111 <br/>","Station:  106 <br/> Station Latitude:  37.64583 <br/> Station Longitude:  -122.31389 <br/>","Station:  107 <br/> Station Latitude:  37.66806 <br/> Station Longitude:  -122.32611 <br/>","Station:  108 <br/> Station Latitude:  37.69167 <br/> Station Longitude:  -122.33889 <br/>","Station:  109 <br/> Station Latitude:  37.71167 <br/> Station Longitude:  -122.33944 <br/>","Station:  110 <br/> Station Latitude:  37.73333 <br/> Station Longitude:  -122.34528 <br/>","Station:  111 <br/> Station Latitude:  37.75417 <br/> Station Longitude:  -122.35083 <br/>","Station:  112 <br/> Station Latitude:  37.78583 <br/> Station Longitude:  -122.36111 <br/>","Station:  113 <br/> Station Latitude:  37.67917 <br/> Station Longitude:  -122.35833 <br/>","Station:  201 <br/> Station Latitude:  37.81861 <br/> Station Longitude:  -122.42139 <br/>","Station:  202 <br/> Station Latitude:  37.84722 <br/> Station Longitude:  -122.44722 <br/>","Station:  203 <br/> Station Latitude:  37.85778 <br/> Station Longitude:  -122.46972 <br/>","Station:  204 <br/> Station Latitude:  37.83417 <br/> Station Longitude:  -122.39639 <br/>","Station:  205 <br/> Station Latitude:  37.82778 <br/> Station Longitude:  -122.35833 <br/>","Station:  206 <br/> Station Latitude:  37.84389 <br/> Station Longitude:  -122.34111 <br/>","Station:  207 <br/> Station Latitude:  37.87 <br/> Station Longitude:  -122.345 <br/>","Station:  208 <br/> Station Latitude:  37.86528 <br/> Station Longitude:  -122.39861 <br/>","Station:  209 <br/> Station Latitude:  37.88972 <br/> Station Longitude:  -122.42222 <br/>","Station:  210 <br/> Station Latitude:  37.92139 <br/> Station Longitude:  -122.44 <br/>","Station:  211 <br/> Station Latitude:  37.94028 <br/> Station Longitude:  -122.44583 <br/>","Station:  301 <br/> Station Latitude:  37.98031 <br/> Station Longitude:  -122.41197 <br/>","Station:  302 <br/> Station Latitude:  38.01389 <br/> Station Longitude:  -122.375 <br/>","Station:  303 <br/> Station Latitude:  37.97219 <br/> Station Longitude:  -122.425 <br/>","Station:  304 <br/> Station Latitude:  37.99581 <br/> Station Longitude:  -122.436 <br/>","Station:  312 <br/> Station Latitude:  38.01189 <br/> Station Longitude:  -122.432 <br/>","Station:  313 <br/> Station Latitude:  38.02219 <br/> Station Longitude:  -122.449 <br/>","Station:  316 <br/> Station Latitude:  38.06669 <br/> Station Longitude:  -122.427 <br/>","Station:  317 <br/> Station Latitude:  37.99831 <br/> Station Longitude:  -122.449 <br/>","Station:  318 <br/> Station Latitude:  38.05 <br/> Station Longitude:  -122.431 <br/>","Station:  319 <br/> Station Latitude:  38.0775 <br/> Station Longitude:  -122.432 <br/>","Station:  320 <br/> Station Latitude:  38.02361 <br/> Station Longitude:  -122.305 <br/>","Station:  324 <br/> Station Latitude:  38.05281 <br/> Station Longitude:  -122.319 <br/>","Station:  330 <br/> Station Latitude:  38.05189 <br/> Station Longitude:  -122.414 <br/>","Station:  331 <br/> Station Latitude:  38.06531 <br/> Station Longitude:  -122.394 <br/>","Station:  332 <br/> Station Latitude:  38.07331 <br/> Station Longitude:  -122.392 <br/>","Station:  333 <br/> Station Latitude:  38.07311 <br/> Station Longitude:  -122.357 <br/>","Station:  402 <br/> Station Latitude:  38.05561 <br/> Station Longitude:  -122.183 <br/>","Station:  419 <br/> Station Latitude:  38.10419 <br/> Station Longitude:  -122.058 <br/>","Station:  506 <br/> Station Latitude:  38.05281 <br/> Station Longitude:  -121.944 <br/>","Station:  514 <br/> Station Latitude:  38.06389 <br/> Station Longitude:  -121.844 <br/>","Station:  607 <br/> Station Latitude:  38.18381 <br/> Station Longitude:  -121.967 <br/>","Station:  609 <br/> Station Latitude:  38.16771 <br/> Station Longitude:  -121.9347 <br/>","Station:  702 <br/> Station Latitude:  38.06111 <br/> Station Longitude:  -121.814 <br/>","Station:  794 <br/> Station Latitude:  38.56118333 <br/> Station Longitude:  -121.55618 <br/>","Station:  799 <br/> Station Latitude:  38.370767 <br/> Station Longitude:  -121.63075 <br/>","Station:  801 <br/> Station Latitude:  38.05561 <br/> Station Longitude:  -121.847 <br/>","Station:  803 <br/> Station Latitude:  38.02219 <br/> Station Longitude:  -121.819 <br/>","Station:  805 <br/> Station Latitude:  38.02683 <br/> Station Longitude:  -121.772 <br/>","Station:  901 <br/> Station Latitude:  38.05669 <br/> Station Longitude:  -121.667 <br/>","Station:  907 <br/> Station Latitude:  38.0625 <br/> Station Longitude:  -121.50056 <br/>","Station:  916 <br/> Station Latitude:  37.87919 <br/> Station Longitude:  -121.5762637 <br/>","Station:  917 <br/> Station Latitude:  37.87419 <br/> Station Longitude:  -121.52331 <br/>","Station:  918 <br/> Station Latitude:  37.86111 <br/> Station Longitude:  -121.56931 <br/>","Station:  924 <br/> Station Latitude:  38.08914 <br/> Station Longitude:  -121.53575 <br/>","Station:  925 <br/> Station Latitude:  38.14039 <br/> Station Longitude:  -121.47947 <br/>"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"13px","textOnly":false,"style":{"font-weight":"normal","padding":"3px 8px"},"className":"","sticky":true},null]}],"setView":[[38.12,-122],9,[]],"limits":{"lat":[37.59028,38.56118333],"lng":[-122.46972,-121.37172]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>So hopefully this is pretty straightforward. Obviously, there’s a lot you can do with these packages and an infinite amount of customization possible. Play around with making maps with your data and reach out to me if I can help.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>